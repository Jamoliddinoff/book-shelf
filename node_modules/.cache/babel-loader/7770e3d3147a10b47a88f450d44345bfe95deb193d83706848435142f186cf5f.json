{"ast":null,"code":"import axios from 'axios';\nimport { BASE_URL, DEFAULT_HEADERS } from '../constants';\nimport AsyncStorage from '@react-native-async-storage/async-storage';\nimport { store } from '../store';\nimport { clearTokenAction } from '../store/auth';\nimport { setAlertAction } from '../store/alertPopUp';\nconst httpClient = axios.create({\n  withCredentials: true,\n  baseURL: BASE_URL,\n  headers: DEFAULT_HEADERS\n});\nhttpClient.interceptors.response.use(response => {\n  console.log('RESPONSE: ', response);\n  return response;\n}, error => {\n  console.log('error ====>', error);\n  store.dispatch(setAlertAction({\n    type: 'error',\n    message: error === null || error === void 0 ? void 0 : error.message\n  }));\n  let status = error.response && error.response.status || 0;\n  if (status === 401) {\n    //clear access token\n    console.log('status ====>', error);\n\n    // RootNavigation.navigate(NAVIGATORS.LOGIN);\n    return Promise.reject('login or password invalid');\n  }\n  return Promise.reject(error);\n});\nhttpClient.interceptors.request.use(async config => {\n  let _access_token;\n  // try {\n  //     let token = await AsyncStorage.getItem('@token');\n  //     // const { access_token } = JSON.parse(token) || null;\n  //     _access_token = (await JSON.parse(token)) || null;\n  // } catch (error) {\n  //     console.log(error);\n  //     _access_token = null;\n  // }\n  if (_access_token) {\n    config.headers = Object.assign(config.headers, {\n      Authorization: 'Bearer ' + _access_token\n    });\n    return config;\n  } else {\n    return config;\n  }\n});\nexport const httpGet = (url, params) => httpClient(url, {\n  method: 'get',\n  ...params\n});\nexport const httpPost = (url, params) => httpClient(url, {\n  method: 'post',\n  ...params\n});\nexport const httpPut = (url, params) => httpClient(url, {\n  method: 'put',\n  ...params\n});\nexport const httpPatch = (url, params) => httpClient(url, {\n  method: 'patch',\n  ...params\n});\nexport const httpDelete = (url, params) => httpClient(url, {\n  method: 'delete',\n  ...params\n});","map":{"version":3,"names":["axios","BASE_URL","DEFAULT_HEADERS","AsyncStorage","store","clearTokenAction","setAlertAction","httpClient","create","withCredentials","baseURL","headers","interceptors","response","use","console","log","error","dispatch","type","message","status","Promise","reject","request","config","_access_token","Object","assign","Authorization","httpGet","url","params","method","httpPost","httpPut","httpPatch","httpDelete"],"sources":["/Users/macos/MyFolders/projects/smart-base-task/src/api/index.js"],"sourcesContent":["import axios from 'axios';\nimport { BASE_URL, DEFAULT_HEADERS } from '../constants';\nimport AsyncStorage from '@react-native-async-storage/async-storage';\nimport { store } from '../store';\nimport { clearTokenAction } from '../store/auth';\nimport { setAlertAction } from '../store/alertPopUp';\n\nconst httpClient = axios.create({\n    withCredentials: true,\n    baseURL: BASE_URL,\n    headers: DEFAULT_HEADERS,\n});\n\nhttpClient.interceptors.response.use(\n    (response) => {\n        console.log('RESPONSE: ', response);\n        return response;\n    },\n    (error) => {\n        console.log('error ====>', error);\n        store.dispatch(setAlertAction({ type: 'error', message: error?.message }));\n        let status = (error.response && error.response.status) || 0;\n        if (status === 401) {\n            //clear access token\n            console.log('status ====>', error);\n\n            // RootNavigation.navigate(NAVIGATORS.LOGIN);\n            return Promise.reject('login or password invalid');\n        }\n        return Promise.reject(error);\n    }\n);\n\nhttpClient.interceptors.request.use(async (config) => {\n    let _access_token;\n    // try {\n    //     let token = await AsyncStorage.getItem('@token');\n    //     // const { access_token } = JSON.parse(token) || null;\n    //     _access_token = (await JSON.parse(token)) || null;\n    // } catch (error) {\n    //     console.log(error);\n    //     _access_token = null;\n    // }\n    if (_access_token) {\n        config.headers = Object.assign(config.headers, {\n            Authorization: 'Bearer ' + _access_token,\n        });\n        return config;\n    } else {\n        return config;\n    }\n});\n\nexport const httpGet = (url, params) => httpClient(url, { method: 'get', ...params });\n\nexport const httpPost = (url, params) => httpClient(url, { method: 'post', ...params });\n\nexport const httpPut = (url, params) => httpClient(url, { method: 'put', ...params });\n\nexport const httpPatch = (url, params) => httpClient(url, { method: 'patch', ...params });\n\nexport const httpDelete = (url, params) => httpClient(url, { method: 'delete', ...params });\n"],"mappings":"AAAA,OAAOA,KAAK,MAAM,OAAO;AACzB,SAASC,QAAQ,EAAEC,eAAe,QAAQ,cAAc;AACxD,OAAOC,YAAY,MAAM,2CAA2C;AACpE,SAASC,KAAK,QAAQ,UAAU;AAChC,SAASC,gBAAgB,QAAQ,eAAe;AAChD,SAASC,cAAc,QAAQ,qBAAqB;AAEpD,MAAMC,UAAU,GAAGP,KAAK,CAACQ,MAAM,CAAC;EAC5BC,eAAe,EAAE,IAAI;EACrBC,OAAO,EAAET,QAAQ;EACjBU,OAAO,EAAET;AACb,CAAC,CAAC;AAEFK,UAAU,CAACK,YAAY,CAACC,QAAQ,CAACC,GAAG,CAC/BD,QAAQ,IAAK;EACVE,OAAO,CAACC,GAAG,CAAC,YAAY,EAAEH,QAAQ,CAAC;EACnC,OAAOA,QAAQ;AACnB,CAAC,EACAI,KAAK,IAAK;EACPF,OAAO,CAACC,GAAG,CAAC,aAAa,EAAEC,KAAK,CAAC;EACjCb,KAAK,CAACc,QAAQ,CAACZ,cAAc,CAAC;IAAEa,IAAI,EAAE,OAAO;IAAEC,OAAO,EAAEH,KAAK,aAALA,KAAK,uBAALA,KAAK,CAAEG;EAAQ,CAAC,CAAC,CAAC;EAC1E,IAAIC,MAAM,GAAIJ,KAAK,CAACJ,QAAQ,IAAII,KAAK,CAACJ,QAAQ,CAACQ,MAAM,IAAK,CAAC;EAC3D,IAAIA,MAAM,KAAK,GAAG,EAAE;IAChB;IACAN,OAAO,CAACC,GAAG,CAAC,cAAc,EAAEC,KAAK,CAAC;;IAElC;IACA,OAAOK,OAAO,CAACC,MAAM,CAAC,2BAA2B,CAAC;EACtD;EACA,OAAOD,OAAO,CAACC,MAAM,CAACN,KAAK,CAAC;AAChC,CACJ,CAAC;AAEDV,UAAU,CAACK,YAAY,CAACY,OAAO,CAACV,GAAG,CAAC,MAAOW,MAAM,IAAK;EAClD,IAAIC,aAAa;EACjB;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA,IAAIA,aAAa,EAAE;IACfD,MAAM,CAACd,OAAO,GAAGgB,MAAM,CAACC,MAAM,CAACH,MAAM,CAACd,OAAO,EAAE;MAC3CkB,aAAa,EAAE,SAAS,GAAGH;IAC/B,CAAC,CAAC;IACF,OAAOD,MAAM;EACjB,CAAC,MAAM;IACH,OAAOA,MAAM;EACjB;AACJ,CAAC,CAAC;AAEF,OAAO,MAAMK,OAAO,GAAGA,CAACC,GAAG,EAAEC,MAAM,KAAKzB,UAAU,CAACwB,GAAG,EAAE;EAAEE,MAAM,EAAE,KAAK;EAAE,GAAGD;AAAO,CAAC,CAAC;AAErF,OAAO,MAAME,QAAQ,GAAGA,CAACH,GAAG,EAAEC,MAAM,KAAKzB,UAAU,CAACwB,GAAG,EAAE;EAAEE,MAAM,EAAE,MAAM;EAAE,GAAGD;AAAO,CAAC,CAAC;AAEvF,OAAO,MAAMG,OAAO,GAAGA,CAACJ,GAAG,EAAEC,MAAM,KAAKzB,UAAU,CAACwB,GAAG,EAAE;EAAEE,MAAM,EAAE,KAAK;EAAE,GAAGD;AAAO,CAAC,CAAC;AAErF,OAAO,MAAMI,SAAS,GAAGA,CAACL,GAAG,EAAEC,MAAM,KAAKzB,UAAU,CAACwB,GAAG,EAAE;EAAEE,MAAM,EAAE,OAAO;EAAE,GAAGD;AAAO,CAAC,CAAC;AAEzF,OAAO,MAAMK,UAAU,GAAGA,CAACN,GAAG,EAAEC,MAAM,KAAKzB,UAAU,CAACwB,GAAG,EAAE;EAAEE,MAAM,EAAE,QAAQ;EAAE,GAAGD;AAAO,CAAC,CAAC"},"metadata":{},"sourceType":"module","externalDependencies":[]}